<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Play Dead â€“ Project Zomboid Server</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Play Dead theme -->
  <link href="pd.css" rel="stylesheet" />

  <!-- Vue 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
<div id="app">

  <div class="container-fluid h-100">
    <div class="row h-100">

      <!-- Sidebar -->
      <div class="col-2 sidebar p-0">
        <div class="pd-header">
          <img src="assets/PD.png" alt="Play Dead Panda" />
          <div>
            Play Dead<br />
            <small class="text-muted">Project Zomboid Server</small>
          </div>
        </div>
        <div><strong>INTERNAL TOOLS</strong></div>
        <button
          class="nav-button"
          v-for="item in navItems"
          v-on:click="openTab(item)"
        >
          {{ item.label }}
        </button>
        <div><strong>EXTERNAL LINKS</strong></div>
        <button
          class="nav-button external"
          v-for="link in externalLinks"
          v-on:click="openExternal(link)"
        >
          {{ link.label }}
        </button> 
      </div>

      <!-- Main -->
      <div class="col-10 p-0">

        <!-- Tabs -->
        <div class="tab-bar">
          <div
            class="tab"
            v-for="tab in tabs"
            :class="{ active: tab.id === activeTab }"
            v-on:click="activeTab = tab.id"
          >
            {{ tab.label }}
          </div>
        </div>

        <!-- Content -->
        <div v-for="tab in tabs" v-show="tab.id === activeTab">
          <iframe :src="tab.src"></iframe>
        </div>

      </div>

    </div>
  </div>

</div>

<script>
const app = Vue.createApp({
  data() {
    return {
      activeTab: null,
      tabs: [],
      navItems: [
        { id: "items", label: "Item Parser", src: "play-dead.html" },
        { id: "logs", label: "Log Parser", src: "log-parser.html" },
        { id: "inibuilder", label: "ini string builder", src: "string-constructor.html" }
      ],
      externalLinks: [

      {
        id: "master", label: "MASTER SHEET",
        url: "https://sites.google.com/view/playdeadmastersheet/home"
      },
      {
        id: "factions", label: "Faction List",
        url: "https://docs.google.com/document/d/1JkMWEliOVG6EqCMe62SrMrXB3R5eDgx-50kPsct0_KU/edit?tab=t.g6q4a0bv7iwc"
      },
      {
        id: "b42modDoc", label: "B42 Google Mod Doc",
        url: "https://docs.google.com/spreadsheets/d/1w5e-0eO3bh2moPlpemYbPL5B0Z_guKjj-x4ufE9KeOk/edit?gid=0#gid=0&fvid=1583629385"
      },
      {
        id: "miro", label: "Play Dead Mind Maps",
        url: "https://miro.com/app/board/uXjVI2XFg7Y=/"
      },
      {
        id: "triage", label: "Main Triage board",
        url: "https://trello.com/b/YzZkTFMU/play-dead"
      },
      {
        id: "modTriage", label: "Mod Triage board",
        url: "https://trello.com/b/4zgfpTMf/play-dead-mods"
      },
      {
        id: "BMB41", label: "B41 battleMetrics",
        url: "https://www.battlemetrics.com/servers/zomboid/33153448"
      },
      {
        id: "BMB42", label: "B42 BattleMetrics",
        url: "https://www.battlemetrics.com/servers/zomboid/36831527"
      }

    ]
    };
  },

  methods: {
    openTab(item) {
      const existing = this.tabs.find(t => t.id === item.id);
      if (!existing) {
        this.tabs.push(item);
      }
      this.activeTab = item.id;
    },
    openExternal(link) {
      window.open(link.url, "_blank", "noopener");
    }
  }
});

app.mount("#app");
</script>

</body>
</html>
